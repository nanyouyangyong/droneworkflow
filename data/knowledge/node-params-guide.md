# 工作流节点参数详细说明

## 基础节点

### start（开始节点）
- 每个工作流必须有且仅有一个开始节点
- 无参数
- 作为工作流的入口点

### end（结束节点）
- 每个工作流必须有且仅有一个结束节点
- 无参数
- 所有执行路径最终汇聚到此节点

## 飞行控制节点

### 起飞
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| altitude | number | 是 | 30 | 起飞目标高度（米），范围 10-120 |

注意事项：
- 起飞前系统会自动执行预检（电量、GPS、指南针）
- 城市区域高度不超过 120 米
- 建议起飞后添加悬停节点确认状态

### 降落
- 无参数
- 自动降落到当前位置正下方
- 降落速度约 1-2 m/s
- 建议降落前先飞行到安全降落点

### 悬停
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| duration | number | 是 | 10 | 悬停时间（秒），范围 1-300 |

使用场景：
- 起飞后稳定确认
- 拍照前稳定位置
- 等待指令

### 飞行到点
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| lat | number | 是 | - | 目标纬度，范围 -90 到 90 |
| lng | number | 是 | - | 目标经度，范围 -180 到 180 |
| altitude | number | 否 | 当前高度 | 飞行高度（米） |

注意事项：
- 两个航点之间距离不宜超过 2km（单次飞行）
- 系统会自动规划最优航线
- 飞行过程中持续检测障碍物

### 返航
- 无参数
- 自动返回起飞点
- 返航高度默认 50 米（高于障碍物）
- 到达起飞点上方后自动降落

## 数据采集节点

### 定时拍照
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| intervalSec | number | 是 | 10 | 拍照间隔（秒），范围 1-60 |

使用场景：
- 巡检拍照：间隔 5-10 秒
- 测绘拍照：间隔 2-3 秒（需要高重叠率）
- 监控拍照：间隔 30-60 秒

### 录像
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| action | string | 是 | "start" | 操作类型："start" 开始录像，"stop" 停止录像 |

注意事项：
- 录像会持续消耗存储空间
- 建议在任务结束前添加 stop 录像节点
- 4K 录像约占用 400MB/分钟存储

## 安全检查节点

### 电量检查
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| threshold | number | 是 | 30 | 电量阈值百分比，范围 10-90 |

典型用法：
- 与条件判断配合使用
- 低于阈值时走返航分支
- 建议在每个主要任务节点后添加电量检查

### 查询天气
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| city | string | 是 | - | 查询城市名称 |

返回数据包含：温度、风速、降水概率、能见度

## 任务节点

### 区域巡检
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| areaName | string | 是 | - | 巡检区域名称 |

巡检模式：
- 往返式（适合矩形区域）
- 螺旋式（适合圆形区域）
- 沿边式（适合不规则区域）

## 控制流节点

### 条件判断
用于工作流分支控制，根据条件表达式选择不同的执行路径。

条件表达式示例：
- `battery < 30%` — 电量低于 30%
- `weather == "rain"` — 天气为雨
- `altitude > 100` — 高度超过 100 米
- `obstacle_detected == true` — 检测到障碍物

### parallel_fork（并行分叉）
| 参数 | 类型 | 必填 | 默认值 | 说明 |
|------|------|------|--------|------|
| droneIds | string[] | 是 | - | 参与并行执行的无人机 ID 列表 |

规则：
- 每条分支代表一架无人机的独立任务
- 分支中每个节点的 params 必须包含 droneId
- 所有分支最终汇聚到 parallel_join

### parallel_join（并行汇聚）
- 无参数
- 等待所有并行分支完成后继续
- 任一分支失败会根据失败策略处理
